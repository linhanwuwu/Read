<!-- ############################################################ -->
<!-- ##### ç°ä»£åŒ–å°è¯´é˜…è¯»å™¨ï¼ˆæ”¯æŒGitHubè‡ªåŠ¨åŠ è½½å°è¯´ï¼‰ ##### -->
<!-- ############################################################ -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç°ä»£åŒ–å°è¯´é˜…è¯»å™¨</title>
    <style>
        /* ############################################################ */
        /* ##### åŸºç¡€æ ·å¼å’Œä¸»é¢˜è®¾ç½® ##### */
        /* ############################################################ */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #f5f0e1 0%, #e6d3a7 100%);
            color: #000000;
            min-height: 100vh;
            transition: background 0.3s ease, color 0.3s ease;
            padding: 20px;
        }
        
        body.night-mode {
            background: linear-gradient(135deg, #444444 0%, #34495e 100%);
            color: #ffffff;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* ############################################################ */
        /* ##### å¤´éƒ¨æ ·å¼ ##### */
        /* ############################################################ */
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            position: relative;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #8b4513;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        body.night-mode h1 {
            color: #ffffff;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
        }
        
        /* ############################################################ */
        /* ##### æ§åˆ¶é¢æ¿æ ·å¼ ##### */
        /* ############################################################ */
        
        .control-panel {
            background: rgba(245, 240, 225, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: space-between;
        }
        
        body.night-mode .control-panel {
            background: rgba(40, 40, 40, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        
        .control-group label {
            font-weight: bold;
        }
        
        select, input, button {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.8);
            font-family: inherit;
            font-size: 1rem;
        }
        
        body.night-mode select, 
        body.night-mode input, 
        body.night-mode button {
            background: rgba(60, 60, 60, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }
        
        button {
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            background: linear-gradient(to bottom, #8b4513, #5d2e0a);
            color: white;
            border: none;
        }
        
        body.night-mode button {
            background: linear-gradient(to bottom, #555555, #333333);
            color: #ffffff;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* ############################################################ */
        /* ##### å†…å®¹åŒºåŸŸæ ·å¼ ##### */
        /* ############################################################ */
        
        .content-area {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        /* ############################################################ */
        /* ##### ç« èŠ‚åˆ—è¡¨æ ·å¼ ##### */
        /* ############################################################ */
        
        .chapter-list-container {
            flex: 1;
            min-width: 300px;
            background: rgba(245, 240, 225, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.1);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        body.night-mode .chapter-list-container {
            background: rgba(40, 40, 40, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .chapter-list-container h2 {
            margin-bottom: 15px;
            color: #8b4513;
            text-align: center;
        }
        
        body.night-mode .chapter-list-container h2 {
            color: #ffffff;
        }
        
        .chapter-list {
            list-style: none;
        }
        
        .chapter-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        body.night-mode .chapter-item {
            background: rgba(60, 60, 60, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chapter-item:hover {
            background: rgba(139, 69, 19, 0.2);
            transform: translateX(5px);
        }
        
        body.night-mode .chapter-item:hover {
            background: rgba(100, 100, 100, 0.7);
        }
        
        .chapter-item.active {
            background: rgba(139, 69, 19, 0.4);
            font-weight: bold;
        }
        
        body.night-mode .chapter-item.active {
            background: rgba(100, 100, 100, 0.9);
        }
        
        /* ############################################################ */
        /* ##### é˜…è¯»åŒºåŸŸæ ·å¼ ##### */
        /* ############################################################ */
        
        .reader-container {
            flex: 2;
            min-width: 300px;
            background: rgba(245, 240, 225, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        body.night-mode .reader-container {
            background: rgba(40, 40, 40, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .chapter-title {
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #8b4513;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(139, 69, 19, 0.3);
        }
        
        body.night-mode .chapter-title {
            color: #ffffff;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .chapter-content {
            line-height: 1.8;
            font-size: 1.1rem;
            text-indent: 2em;
        }
        
        .chapter-content p {
            margin-bottom: 20px;
            text-align: justify;
        }
        
        /* ############################################################ */
        /* ##### å¯¼èˆªæŒ‰é’®æ ·å¼ ##### */
        /* ############################################################ */
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        body.night-mode .navigation {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* ############################################################ */
        /* ##### éŸ³ä¹æ’­æ”¾å™¨æ ·å¼ ##### */
        /* ############################################################ */
        
        .music-player-container {
            position: fixed;
            right: 15px;
            bottom: 15px;
            z-index: 1000;
            font-family: Arial, sans-serif;
        }

        .music-player-mini {
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .music-player-mini:hover {
            transform: scale(1.1);
        }

        .music-player-mini .play-icon {
            color: white;
            font-size: 20px;
        }

        .music-player-full {
            width: 260px;
            background: rgba(30, 30, 30, 0.95);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            display: none;
            position: fixed;
            right: 15px;
            bottom: 80px;
            z-index: 1000;
        }

        .music-player-full.active {
            display: block;
        }

        .album-cover-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 12px;
            position: relative;
        }

        .album-cover {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #8b4513;
        }

        body.night-mode .album-cover {
            border: 2px solid #ffffff;
        }

        .song-info {
            text-align: center;
            margin-bottom: 15px;
            color: white;
        }

        .song-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .song-artist {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .loading-indicator {
            text-align: center;
            color: white;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .lyrics-container {
            height: 60px;
            overflow: hidden;
            margin-bottom: 15px;
            display: none;
        }

        .lyrics-container.show {
            display: block;
        }

        .lyrics {
            text-align: center;
            color: #ffcc00;
            font-size: 0.9rem;
            line-height: 1.4;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toggle-lyrics {
            text-align: center;
            margin-bottom: 15px;
        }

        .toggle-lyrics label {
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .progress-container {
            width: 100%;
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .progress-bar {
            height: 100%;
            background: #8b4513;
            border-radius: 3px;
            width: 0%;
        }

        body.night-mode .progress-bar {
            background: #ffffff;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .volume-control span {
            color: white;
            font-size: 1.2rem;
        }

        .volume-slider {
            flex: 1;
            height: 5px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #8b4513;
            cursor: pointer;
        }

        body.night-mode .volume-slider::-webkit-slider-thumb {
            background: #ffffff;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(139, 69, 19, 0.5);
            transform: scale(1.1);
        }

        body.night-mode .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .play-btn {
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
        }

        .file-input-container {
            text-align: center;
            margin-bottom: 15px;
        }

        .file-input-label {
            display: inline-block;
            padding: 8px 15px;
            background: rgba(139, 69, 19, 0.7);
            color: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .file-input-label:hover {
            background: rgba(139, 69, 19, 1);
            transform: translateY(-2px);
        }

        body.night-mode .file-input-label {
            background: rgba(100, 100, 100, 0.7);
        }

        body.night-mode .file-input-label:hover {
            background: rgba(150, 150, 150, 1);
        }

        #fileInputMusic {
            display: none;
        }

        .playlist-container {
            max-height: 100px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 10px;
        }

        .playlist-item {
            padding: 5px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .playlist-item.active {
            color: #ffcc00;
            font-weight: bold;
        }
        
        /* ############################################################ */
        /* ##### å“åº”å¼è®¾è®¡ ##### */
        /* ############################################################ */
        
        @media (max-width: 768px) {
            .content-area {
                flex-direction: column;
            }
            
            .control-panel {
                flex-direction: column;
            }
            
            .control-group {
                width: 100%;
                justify-content: space-between;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .reader-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š ç°ä»£åŒ–å°è¯´é˜…è¯»å™¨</h1>
            <div class="subtitle">äº«å—é˜…è¯»çš„ç¾å¥½æ—¶å…‰</div>
        </header>
        
        <div class="control-panel">
            <div class="control-group">
                <label for="fontSize">å­—ä½“å¤§å°:</label>
                <select id="fontSize">
                    <option value="small">å°å·</option>
                    <option value="medium" selected>ä¸­å·</option>
                    <option value="large">å¤§å·</option>
                    <option value="xlarge">è¶…å¤§å·</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="themeToggle">å¤œé—´æ¨¡å¼:</label>
                <input type="checkbox" id="themeToggle">
            </div>
            
            <div class="control-group">
                <button id="prevChapter">ä¸Šä¸€ç« </button>
                <button id="nextChapter">ä¸‹ä¸€ç« </button>
            </div>
            
            <div class="control-group">
                <label for="chapterJump">è·³è½¬åˆ°:</label>
                <input type="number" id="chapterJump" min="1" placeholder="ç« èŠ‚å·">
                <button id="jumpButton">è·³è½¬</button>
            </div>
        </div>
        
        <div class="content-area">
            <div class="chapter-list-container">
                <h2>ğŸ“– ç« èŠ‚åˆ—è¡¨</h2>
                <ul class="chapter-list" id="chapterList">
                    <!-- ç« èŠ‚åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </ul>
            </div>
            
            <div class="reader-container">
                <div class="chapter-title" id="currentChapterTitle">è¯·é€‰æ‹©ç« èŠ‚å¼€å§‹é˜…è¯»</div>
                <div class="chapter-content" id="chapterContent">
                    <!-- ç« èŠ‚å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                </div>
                
                <div class="navigation">
                    <button id="prevChapterBottom">ä¸Šä¸€ç« </button>
                    <button id="nextChapterBottom">ä¸‹ä¸€ç« </button>
                </div>
            </div>
        </div>
    </div>

    <!-- éŸ³ä¹æ’­æ”¾å™¨æ‚¬æµ®çª— -->
    <div class="music-player-container" id="musicPlayerContainer">
        <div class="music-player-mini" id="miniPlayer">
            <div class="play-icon">â™ª</div>
        </div>
        
        <div class="music-player-full" id="fullPlayer">
            <div class="album-cover-container">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiMzMzMzMzMiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iIzIyMjIyMiIvPjxwYXRoIGQ9Ik01MCwxMEw2MCw0MEw5MCw0MEw2NSw2MEw3NSw5MEw1MCw3MEwyNSw5MEwzNSw2MEwxMCw0MEw0MCw0MEw1MCwxMFoiIGZpbGw9IiNmZjAwMDAiLz48L3N2Zz4=" 
                     alt="Album Cover" class="album-cover" id="albumCover">
            </div>
            
            <div class="song-info">
                <div class="song-title" id="songTitle">æœªé€‰æ‹©æ­Œæ›²</div>
                <div class="song-artist" id="songArtist">è¯·æ·»åŠ éŸ³ä¹æ–‡ä»¶</div>
            </div>
            
            <div class="loading-indicator" id="loadingIndicator" style="display: none;">
                æ­£åœ¨åŠ è½½éŸ³ä¹å’Œæ­Œè¯...
            </div>
            
            <div class="lyrics-container" id="lyricsContainer">
                <div class="lyrics" id="lyrics">äº«å—éŸ³ä¹æ—¶å…‰</div>
            </div>
            
            <div class="toggle-lyrics">
                <label>
                    <input type="checkbox" id="lyricsToggle" checked> æ˜¾ç¤ºæ­Œè¯
                </label>
            </div>
            
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="volume-control">
                <span>ğŸ”Š</span>
                <input type="range" min="0" max="1" step="0.01" value="1" class="volume-slider" id="volumeSlider">
            </div>
            
            <div class="controls">
                <button class="control-btn" id="prevBtn">â®</button>
                <button class="control-btn play-btn" id="playBtn">â–¶</button>
                <button class="control-btn" id="nextBtn">â­</button>
            </div>
            
            <div class="file-input-container">
                <input type="file" id="fileInputMusic" accept=".mp3,.flac,audio/*" multiple>
                <label for="fileInputMusic" class="file-input-label">æ·»åŠ éŸ³ä¹</label>
            </div>
            
            <div class="playlist-container" id="playlistContainer">
                <div class="playlist-item" id="defaultPlaylistItem">æš‚æ— æ’­æ”¾åˆ—è¡¨</div>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        class ModernNovelReader {
            constructor() {
                this.currentChapter = 0;
                this.chapters = [];
                this.fontSize = 'medium';
                this.isNightMode = false;
                
                this.initializeElements();
                this.bindEvents();
                this.applyTheme();
                this.applyFontSize();
            }
            
            initializeElements() {
                // æ§åˆ¶é¢æ¿å…ƒç´ 
                this.themeToggle = document.getElementById('themeToggle');
                this.fontSizeSelect = document.getElementById('fontSize');
                this.chapterJump = document.getElementById('chapterJump');
                this.jumpButton = document.getElementById('jumpButton');
                
                // å¯¼èˆªæŒ‰é’®
                this.prevChapter = document.getElementById('prevChapter');
                this.nextChapter = document.getElementById('nextChapter');
                this.prevChapterBottom = document.getElementById('prevChapterBottom');
                this.nextChapterBottom = document.getElementById('nextChapterBottom');
                
                // å†…å®¹æ˜¾ç¤ºåŒºåŸŸ
                this.chapterList = document.getElementById('chapterList');
                this.currentChapterTitle = document.getElementById('currentChapterTitle');
                this.chapterContent = document.getElementById('chapterContent');
            }
            
            bindEvents() {
                // ä¸»é¢˜åˆ‡æ¢
                this.themeToggle.addEventListener('change', () => {
                    this.isNightMode = this.themeToggle.checked;
                    this.applyTheme();
                });
                
                // å­—ä½“å¤§å°è°ƒæ•´
                this.fontSizeSelect.addEventListener('change', () => {
                    this.fontSize = this.fontSizeSelect.value;
                    this.applyFontSize();
                });
                
                // ç« èŠ‚è·³è½¬
                this.jumpButton.addEventListener('click', () => {
                    const chapterNum = parseInt(this.chapterJump.value);
                    if (chapterNum && chapterNum > 0 && chapterNum <= this.chapters.length) {
                        this.loadChapter(chapterNum - 1);
                    } else {
                        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ç« èŠ‚å·');
                    }
                });
                
                // å›è½¦é”®è·³è½¬
                this.chapterJump.addEventListener('keyup', (e) => {
                    if (e.key === 'Enter') {
                        this.jumpButton.click();
                    }
                });
                
                // å¯¼èˆªæŒ‰é’®
                this.prevChapter.addEventListener('click', () => this.previousChapter());
                this.nextChapter.addEventListener('click', () => this.nextChapterFunc());
                this.prevChapterBottom.addEventListener('click', () => this.previousChapter());
                this.nextChapterBottom.addEventListener('click', () => this.nextChapterFunc());
            }
            
            applyTheme() {
                if (this.isNightMode) {
                    document.body.classList.add('night-mode');
                } else {
                    document.body.classList.remove('night-mode');
                }
            }
            
            applyFontSize() {
                const sizes = {
                    'small': '14px',
                    'medium': '16px',
                    'large': '18px',
                    'xlarge': '20px'
                };
                
                this.chapterContent.style.fontSize = sizes[this.fontSize];
            }
            
            // æ¨¡æ‹ŸåŠ è½½å°è¯´å†…å®¹
            loadNovel(content) {
                // è¿™é‡Œåº”è¯¥è§£æå°è¯´å†…å®¹å¹¶æå–ç« èŠ‚
                // ä¸ºæ¼”ç¤ºç›®çš„ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€äº›ç¤ºä¾‹ç« èŠ‚
                this.chapters = [
                    {
                        title: "ç¬¬ä¸€ç«  ç¦»å®¶å‡ºèµ°",
                        content: `<p>æ¸…æ™¨çš„ç¬¬ä¸€ç¼•é˜³å…‰é€è¿‡çª—å¸˜æ´’åœ¨åœ°æ¿ä¸Šï¼Œææ˜ç¼“ç¼“çå¼€çœ¼ç›ã€‚ä»Šå¤©æ˜¯ä»–å†³å®šç¦»å®¶å‡ºèµ°çš„æ—¥å­ã€‚</p>
                        <p>ä»–è½»æ‰‹è½»è„šåœ°æ”¶æ‹¾ç€è¡Œæï¼Œå¿ƒä¸­äº”å‘³æ‚é™ˆã€‚çˆ¶æ¯çš„æœŸæœ›ã€è‡ªå·±çš„æ¢¦æƒ³ï¼Œä¸¤è€…ä¹‹é—´çš„å†²çªè®©ä»–å¤œä¸èƒ½å¯ã€‚</p>
                        <p>"ä¹Ÿè®¸ï¼Œåªæœ‰èµ°å‡ºå»æ‰èƒ½æ‰¾åˆ°çœŸæ­£çš„è‡ªå·±ã€‚"ä»–é»˜é»˜åœ°æƒ³ç€ï¼Œå°†æœ€åä¸€ä»¶è¡£æœæ”¾è¿›èƒŒåŒ…ã€‚</p>`
                    },
                    {
                        title: "ç¬¬äºŒç«  åˆå…¥ç¤¾ä¼š",
                        content: `<p>åŸå¸‚çš„å–§åš£è®©ææ˜æ„Ÿåˆ°æ—¢å…´å¥‹åˆä¸å®‰ã€‚é«˜æ¥¼å¤§å¦ã€è½¦æ°´é©¬é¾™ï¼Œä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆé™Œç”Ÿã€‚</p>
                        <p>ä»–æ‰¾åˆ°äº†ä¸€ä»½é¤å…æœåŠ¡å‘˜çš„å·¥ä½œï¼Œè™½ç„¶è¾›è‹¦ï¼Œä½†è‡³å°‘èƒ½ç»´æŒåŸºæœ¬ç”Ÿæ´»ã€‚</p>
                        <p>ç¬¬ä¸€å¤©ä¸‹ç­åï¼Œä»–æ‹–ç€ç–²æƒ«çš„èº«ä½“å›åˆ°ç§Ÿæ¥çš„å°æˆ¿é—´ï¼Œèººåœ¨åºŠä¸Šæœ›ç€å¤©èŠ±æ¿ï¼Œæ€è€ƒç€æœªæ¥çš„è·¯ã€‚</p>`
                    },
                    {
                        title: "ç¬¬ä¸‰ç«  æ„å¤–ç›¸é‡",
                        content: `<p>åœ¨é¤å…é‡Œï¼Œææ˜é‡åˆ°äº†å¥¹â€”â€”ä¸€ä¸ªç¬‘å®¹ç¿çƒ‚çš„å¥³å­©ï¼Œåå«å°é›¨ã€‚å¥¹æ˜¯è¿™é‡Œçš„å¸¸å®¢ï¼Œæ€»æ˜¯ç‚¹åŒæ ·çš„å¥—é¤ï¼Œååœ¨é çª—çš„ä½ç½®ã€‚</p>
                        <p>æ¸æ¸åœ°ï¼Œä»–ä»¬å¼€å§‹äº¤è°ˆï¼Œä»å¤©æ°”èŠåˆ°ä¹¦ç±ï¼Œä»å·¥ä½œèŠåˆ°æ¢¦æƒ³ã€‚</p>
                        <p>"ä½ ç›¸ä¿¡å‘½è¿å—ï¼Ÿ"å°é›¨çªç„¶é—®é“ã€‚</p>
                        <p>ææ˜æ„£äº†ä¸€ä¸‹ï¼Œç„¶åç¬‘ç€è¯´ï¼š"ä¹Ÿè®¸å§ï¼Œå¦åˆ™æˆ‘ä»¬æ€ä¹ˆä¼šåœ¨è¿™é‡Œç›¸é‡ã€‚"</p>`
                    },
                    {
                        title: "ç¬¬å››ç«  æ¢¦æƒ³å¯èˆª",
                        content: `<p>åœ¨å°é›¨çš„é¼“åŠ±ä¸‹ï¼Œææ˜é‡æ–°æ‹¾èµ·äº†å°æ—¶å€™çš„å†™ä½œæ¢¦æƒ³ã€‚æ¯å¤©ä¸‹ç­åï¼Œä»–éƒ½ä¼šåœ¨æ˜é»„çš„å°ç¯ä¸‹å†™ä¸‹è‡ªå·±çš„æ•…äº‹ã€‚</p>
                        <p>å‡ ä¸ªæœˆåï¼Œä»–çš„ç¬¬ä¸€ç¯‡çŸ­ç¯‡å°è¯´åœ¨æ‚å¿—ä¸Šå‘è¡¨ï¼Œè™½ç„¶ç¨¿è´¹å¾®è–„ï¼Œä½†é‚£ä»½æˆå°±æ„Ÿè®©ä»–æ¬£å–œè‹¥ç‹‚ã€‚</p>
                        <p>"è¿™åªæ˜¯å¼€å§‹ã€‚"ä»–å¯¹è‡ªå·±è¯´ï¼Œçœ¼ä¸­é—ªçƒç€åšå®šçš„å…‰èŠ’ã€‚</p>`
                    },
                    {
                        title: "ç¬¬äº”ç«  æ–°çš„å¼€å§‹",
                        content: `<p>ä¸€å¹´åï¼Œææ˜å·²ç»æˆä¸ºäº†ä¸€åå°æœ‰åæ°”çš„ä½œå®¶ã€‚ä»–çš„ä½œå“æ¸©æš–è€ŒçœŸå®ï¼Œæ„ŸåŠ¨äº†æ— æ•°è¯»è€…ã€‚</p>
                        <p>å°é›¨æˆäº†ä»–çš„ç¼–è¾‘ï¼Œä¹Ÿæˆäº†ä»–ç”Ÿå‘½ä¸­æœ€é‡è¦çš„äººã€‚</p>
                        <p>ç«™åœ¨æ–°ä¹¦å‘å¸ƒä¼šçš„å°ä¸Šï¼Œææ˜æ„Ÿæ…¨ä¸‡åƒï¼š"æ„Ÿè°¢é‚£ä¸ªå‹‡æ•¢è¸å‡ºå®¶é—¨çš„è‡ªå·±ï¼Œæ„Ÿè°¢æ‰€æœ‰å¸®åŠ©è¿‡æˆ‘çš„äººï¼Œæ›´æ„Ÿè°¢ç”Ÿæ´»ç»™äºˆæˆ‘çš„ä¸€åˆ‡ã€‚"</p>`
                    }
                ];
                
                this.renderChapterList();
                if (this.chapters.length > 0) {
                    this.loadChapter(0);
                }
            }
            
            renderChapterList() {
                this.chapterList.innerHTML = '';
                this.chapters.forEach((chapter, index) => {
                    const li = document.createElement('li');
                    li.className = 'chapter-item';
                    li.textContent = chapter.title;
                    li.addEventListener('click', () => {
                        this.loadChapter(index);
                    });
                    this.chapterList.appendChild(li);
                });
            }
            
            loadChapter(index) {
                if (index < 0 || index >= this.chapters.length) return;
                
                this.currentChapter = index;
                const chapter = this.chapters[index];
                
                // æ›´æ–°æ ‡é¢˜å’Œå†…å®¹
                this.currentChapterTitle.textContent = chapter.title;
                this.chapterContent.innerHTML = chapter.content;
                
                // æ›´æ–°ç« èŠ‚åˆ—è¡¨ä¸­çš„æ´»åŠ¨é¡¹
                document.querySelectorAll('.chapter-item').forEach((item, i) => {
                    if (i === index) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
                
                // æ›´æ–°è·³è½¬è¾“å…¥æ¡†
                this.chapterJump.value = index + 1;
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo(0, 0);
            }
            
            previousChapter() {
                if (this.currentChapter > 0) {
                    this.loadChapter(this.currentChapter - 1);
                }
            }
            
            nextChapterFunc() {
                if (this.currentChapter < this.chapters.length - 1) {
                    this.loadChapter(this.currentChapter + 1);
                }
            }
        }
        
        // ############################################################
        // ##### ä¿®æ”¹åçš„GitHubéŸ³ä¹æ’­æ”¾å™¨åŠŸèƒ½å®ç° #####
        // ############################################################
        
        class GitHubMusicPlayer {
          constructor() {
            this.audio = document.getElementById('audioPlayer');
            this.playlist = [];
            this.currentTrack = 0;
            this.isPlaying = false;
            this.lyricsData = [];
            this.isPlayerVisible = false; // æ–°å¢ï¼šè·Ÿè¸ªæ’­æ”¾å™¨æ˜¯å¦å¯è§
            
            this.initializeElements();
            this.bindEvents();
            this.scanMusicFolder();
          }
          
          initializeElements() {
            this.musicPlayerContainer = document.getElementById('musicPlayerContainer'); // æ–°å¢
            this.miniPlayer = document.getElementById('miniPlayer');
            this.fullPlayer = document.getElementById('fullPlayer');
            this.albumCover = document.getElementById('albumCover');
            this.songTitle = document.getElementById('songTitle');
            this.songArtist = document.getElementById('songArtist');
            this.lyricsContainer = document.getElementById('lyricsContainer');
            this.lyrics = document.getElementById('lyrics');
            this.lyricsToggle = document.getElementById('lyricsToggle');
            this.progressContainer = document.getElementById('progressContainer');
            this.progressBar = document.getElementById('progressBar');
            this.prevBtn = document.getElementById('prevBtn');
            this.playBtn = document.getElementById('playBtn');
            this.nextBtn = document.getElementById('nextBtn');
            this.fileInputMusic = document.getElementById('fileInputMusic');
            this.playlistContainer = document.getElementById('playlistContainer');
            this.defaultPlaylistItem = document.getElementById('defaultPlaylistItem');
            this.volumeSlider = document.getElementById('volumeSlider');
            this.loadingIndicator = document.getElementById('loadingIndicator');
          }
          
          bindEvents() {
            // ä¿®æ”¹ï¼šç‚¹å‡»æ‚¬æµ®çª—åˆ‡æ¢æ’­æ”¾å™¨æ˜¾ç¤º/éšè—
            this.miniPlayer.addEventListener('click', () => {
              this.togglePlayer();
            });
            
            // ä¿®æ”¹ï¼šç‚¹å‡»æ’­æ”¾å™¨å®¹å™¨å¤–éƒ¨ä¹Ÿå¯ä»¥åˆ‡æ¢
            this.musicPlayerContainer.addEventListener('click', (e) => {
              // åªæœ‰ç‚¹å‡»å®¹å™¨æœ¬èº«ï¼ˆä¸æ˜¯å†…éƒ¨å…ƒç´ ï¼‰æ—¶æ‰åˆ‡æ¢
              if (e.target === this.musicPlayerContainer) {
                this.togglePlayer();
              }
            });
            
            // æ’­æ”¾æ§åˆ¶
            this.playBtn.addEventListener('click', () => this.togglePlay());
            this.prevBtn.addEventListener('click', () => this.prevTrack());
            this.nextBtn.addEventListener('click', () => this.nextTrack());
            
            // æ­Œè¯æ˜¾ç¤ºåˆ‡æ¢
            this.lyricsToggle.addEventListener('change', () => {
              if (this.lyricsToggle.checked) {
                this.lyricsContainer.classList.add('show');
              } else {
                this.lyricsContainer.classList.remove('show');
              }
            });
            
            // è¿›åº¦æ¡æ§åˆ¶
            this.progressContainer.addEventListener('click', (e) => {
              const percent = e.offsetX / this.progressContainer.offsetWidth;
              this.audio.currentTime = percent * this.audio.duration;
            });
            
            // æ–‡ä»¶é€‰æ‹©ï¼ˆç”¨äºæœ¬åœ°æµ‹è¯•ï¼‰
            this.fileInputMusic.addEventListener('change', (e) => {
              this.handleFileSelect(e);
            });
            
            // éŸ³é‡æ§åˆ¶
            this.volumeSlider.addEventListener('input', (e) => {
              this.audio.volume = e.target.value;
            });
            
            // éŸ³é¢‘äº‹ä»¶
            this.audio.addEventListener('timeupdate', () => this.updateProgress());
            this.audio.addEventListener('timeupdate', () => this.updateLyrics());
            this.audio.addEventListener('ended', () => this.nextTrack());
            this.audio.addEventListener('play', () => this.setPlayingState(true));
            this.audio.addEventListener('pause', () => this.setPlayingState(false));
            this.audio.addEventListener('error', (e) => {
              console.error('éŸ³é¢‘æ’­æ”¾é”™è¯¯:', e);
              this.loadingIndicator.style.display = 'none';
            });
            this.audio.addEventListener('loadstart', () => {
              this.loadingIndicator.style.display = 'block';
            });
            this.audio.addEventListener('canplay', () => {
              this.loadingIndicator.style.display = 'none';
            });
          }
          
          // æ–°å¢ï¼šåˆ‡æ¢æ’­æ”¾å™¨æ˜¾ç¤º/éšè—
          togglePlayer() {
            this.isPlayerVisible = !this.isPlayerVisible;
            if (this.isPlayerVisible) {
              this.fullPlayer.classList.add('active');
            } else {
              this.fullPlayer.classList.remove('active');
            }
          }
          
          // æ‰«æmusicæ–‡ä»¶å¤¹ä¸­çš„éŸ³ä¹æ–‡ä»¶ - ä½¿ç”¨GitHub API
          async scanMusicFolder() {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // å¤‡ç”¨éŸ³ä¹åŠ è½½æ–¹æ³•
          async scanMusicFolderFallback() {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // å¤„ç†æœ¬åœ°æ–‡ä»¶é€‰æ‹©ï¼ˆç”¨äºæµ‹è¯•ï¼‰
          handleFileSelect(event) {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // åŠ è½½æŒ‡å®šéŸ³ä¹
          async loadTrack(index) {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // åŠ è½½å°é¢å›¾ç‰‡
          async loadCoverImage(track) {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // åŠ è½½æ­Œè¯æ–‡ä»¶
          async loadLyrics(track) {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // è§£æLRCæ­Œè¯æ ¼å¼
          parseLyrics(lyricsText) {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // æ›´æ–°å½“å‰æ­Œè¯æ˜¾ç¤º
          updateLyrics() {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
          
          // æ’­æ”¾/æš‚åœæ§åˆ¶
          togglePlay() {
            if (this.playlist.length === 0) {
              alert('è¯·å…ˆæ·»åŠ éŸ³ä¹æ–‡ä»¶');
              return;
            }
            
            if (this.isPlaying) {
              this.audio.pause();
            } else {
              if (!this.audio.src) {
                this.loadTrack(this.currentTrack);
              }
              this.audio.play();
            }
          }
          
          // è®¾ç½®æ’­æ”¾çŠ¶æ€
          setPlayingState(playing) {
            this.isPlaying = playing;
            this.playBtn.textContent = playing ? 'âšâš' : 'â–¶';
            
            if (playing) {
              this.fullPlayer.classList.add('playing');
            } else {
              this.fullPlayer.classList.remove('playing');
            }
          }
          
          // ä¸Šä¸€é¦–
          prevTrack() {
            if (this.playlist.length === 0) return;
            
            this.currentTrack = (this.currentTrack - 1 + this.playlist.length) % this.playlist.length;
            this.loadTrack(this.currentTrack);
            
            if (this.isPlaying) {
              this.audio.play();
            }
          }
          
          // ä¸‹ä¸€é¦–
          nextTrack() {
            if (this.playlist.length === 0) return;
            
            this.currentTrack = (this.currentTrack + 1) % this.playlist.length;
            this.loadTrack(this.currentTrack);
            
            if (this.isPlaying) {
              this.audio.play();
            }
          }
          
          // æ›´æ–°è¿›åº¦æ¡
          updateProgress() {
            if (this.audio.duration) {
              const percent = (this.audio.currentTime / this.audio.duration) * 100;
              this.progressBar.style.width = `${percent}%`;
            }
          }
          
          // æ›´æ–°æ’­æ”¾åˆ—è¡¨æ˜¾ç¤º
          updatePlaylistDisplay() {
            // ä¸ºä¿æŒç®€æ´ï¼Œè¿™é‡Œçœç•¥éŸ³ä¹æ’­æ”¾å™¨çš„å…·ä½“å®ç°
            // å®é™…ä½¿ç”¨æ—¶ä¿ç•™åŸæœ‰ä»£ç 
          }
        }
        
        // åˆå§‹åŒ–é˜…è¯»å™¨å’ŒéŸ³ä¹æ’­æ”¾å™¨
        document.addEventListener('DOMContentLoaded', () => {
            const reader = new ModernNovelReader();
            // æ¨¡æ‹ŸåŠ è½½å°è¯´å†…å®¹
            reader.loadNovel();
            new GitHubMusicPlayer();
        });
    </script>
</body>
</html>
